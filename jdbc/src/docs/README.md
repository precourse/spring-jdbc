# JDBC 라이브러리 구현하기

## 목표

DAO에서 반복되는 JDBC 코드(Connection/Statement/ResultSet 처리, 예외 변환, 매핑)를 제거할 수 있도록 템플릿 계층을 만들
고, 트랜잭션까지 일관성 있게 관리한다.

## 공통 규칙

- Java JDBC API만 사용한다.
- UserDao는 SQL 문자열 작성, 바인딩 값 전달, 결과 매핑으로만 책임이 한정되어야 한다.
- 리소스(Connection, PreparedStatement, ResultSet)는 누락 없이 정리해야 한다.
- 예외는 일관된 예외 정책으로 처리한다.


## Step 1

### 요구사항

1. JdbcTemplate을 구현하고 다음 기능을 제공한다.
    - update(...) (INSERT/UPDATE/DELETE)
    - query(...) (다건 조회)
    - queryForObject(...) (단건 조회)
2. 조회 매핑을 위해 RowMapper 인터페이스를 정의하고 사용한다.
3. JDBC 자원 관리와 예외 처리를 템플릿 내부에서 일원화한다.
4. UserDao는 SQL 작성, 파라미터 전달, RowMapper만 수행하도록 구조를 바꾼다.

### 제출 기준(체크포인트)

- DAO에서 중복 JDBC 코드가 크게 줄어야 한다.
- 쿼리 실행/맵핑/자원반납이 템플릿으로 동작해야 한다.
- UserDao의 메서드가 SQL 중심 코드로 보일 것.


## Step 2

### 요구사항

1. 조회 처리의 일관성을 맞춘다.
    - 단건 조회, 없음, 다건 반환 동작을 명확히 구분한다.
2. 반환/예외 규격을 정리한다.
    - 단건 초과 결과 처리 예외
    - 단건 없음 처리 방식(Optional 또는 별도 예외) 중 하나를 정하고 일관 적용
3. 구조를 정리해 템플릿/DAO 사용성을 개선한다.

### 제출 기준(체크포인트)

- queryForObject 계열 메서드의 동작이 모호하지 않아야 한다.
- 다건과 단건 조회가 구분되어 예외/반환이 일관적이어야 한다.
- UserDao에서의 사용성이 향상되어야 한다.


## Step 3

### 요구사항

1. 사용자 변경(등록/수정/삭제 등) 시나리오에 트랜잭션 경계를 둔다.
2. 같은 트랜잭션 내에서 동일한 커넥션이 사용되도록 동기화한다.
3. 트랜잭션 제어와 비즈니스 로직을 분리한다.
4. 예외 발생 시 롤백이 동작해야 한다.

### 제출 기준(체크포인트)

- 트랜잭션 시작~커밋/롤백 흐름이 코드상 분리되어야 한다.
- 같은 단위 작업에서 하나의 커넥션이 재사용되어야 한다.
- 실패 시 변경사항이 남지 않아야 한다(테스트로 검증 가능).
